(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{235:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F","aria-hidden":"true"}},[t._v("#")]),t._v(" 装饰模式")]),t._v(" "),s("blockquote",[s("p",[t._v("想要的全部拿过来")])]),t._v(" "),s("h2",{attrs:{id:"%E4%BB%80%E4%B9%88%E6%98%AF%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F","aria-hidden":"true"}},[t._v("#")]),t._v(" 什么是装饰模式？")]),t._v(" "),s("p",[t._v("子类从父类继承，假设继承得到"),s("code",[t._v("child1, child2...")]),t._v("。"),s("code",[t._v("child1, child2...")]),t._v("之间有不同。")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("child1, child2...")]),t._v("想要添加多余的功能(仍旧是从父类继承)，但不是仅仅改变属性。")]),t._v(" "),s("p",[t._v("而是在"),s("code",[t._v("child1")]),t._v("上添加新的方法"),s("code",[t._v("prototype.newfunc")]),t._v("，如果还是传统的逻辑的话。就要重新创建一个子类，而装饰模式就将这些多余的新增方法，合并到一个新的父类"),s("code",[t._v("another parent")]),t._v("，是为了复用。")]),t._v(" "),s("p",[t._v("其特点非常明显")]),t._v(" "),s("ol",[s("li",[t._v("动态添加 - 多余功能是可以动态加入到原有功能上的")]),t._v(" "),s("li",[s("code",[t._v("AOP")]),t._v(" - 功能模块分离，不同模块之间不会互相引用。负责不同的功能。"),s("strong",[t._v("只会将两个模块功能合并到一个新的模块中")]),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0","aria-hidden":"true"}},[t._v("#")]),t._v(" 简单实现")]),t._v(" "),s("p",[t._v("此时我们想要有动态添加的功能，也就是：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("child1.fire()")]),t._v("函数执行之后，我们需要添加新的代码执行。假设是"),s("code",[t._v("firebullet()")]),t._v("函数")])]),t._v(" "),s("p",[t._v("可以通过")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fire "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" plane"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fire")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchild1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fire")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fire")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("firebullet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("以上就是"),s("strong",[t._v("动态装饰的特点！")])]),t._v(" "),s("p",[s("strong",[t._v("为什么可以这么直接替换"),s("code",[t._v("child.fire")]),t._v("方法？")])]),t._v(" "),s("p",[t._v("因为在文中实现类的方式不是通过"),s("code",[t._v("new")]),t._v("关键字，而是")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" child1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fire"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"%E8%BF%9B%E9%98%B6%E7%89%88%E6%9C%AC"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E8%BF%9B%E9%98%B6%E7%89%88%E6%9C%AC","aria-hidden":"true"}},[t._v("#")]),t._v(" 进阶版本")]),t._v(" "),s("p",[t._v("从"),s("strong",[t._v("简单实现版本中")]),t._v("可以发现，动态添加的关键就是")]),t._v(" "),s("ol",[s("li",[t._v("先执行原有的，再执行添加的")]),t._v(" "),s("li",[t._v("或者是先执行添加的再执行原有的")])]),t._v(" "),s("p",[t._v("偷个懒直接搬运原文方法。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("before")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beforefn "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        \n     beforefn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        \n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n \na "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),s("p",[s("strong",[t._v("这样写之后，这里的this指向的"),s("code",[t._v("window")]),t._v("。如果不满足要求，可能还要写"),s("code",[t._v("hack tips")])])]),t._v(" "),s("h2",{attrs:{id:"%E5%92%8C%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8D%E5%90%8C%E7%82%B9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%92%8C%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8D%E5%90%8C%E7%82%B9","aria-hidden":"true"}},[t._v("#")]),t._v(" 和代理模式不同点")]),t._v(" "),s("p",[t._v("相似的，"),s("code",[t._v("before")]),t._v("装饰函数包括了原有的函数，并添加了功能。")]),t._v(" "),s("p",[t._v("区别就在于添加的功能，"),s("strong",[t._v("装饰模式添加功能更为丰富且新，可以不同于原有函数，而代理模式知识在原有基础上添加过滤")])])])}],!1,null,null,null);a.default=e.exports}}]);