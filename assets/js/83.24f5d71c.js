(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{241:function(t,a,n){"use strict";n.r(a);var s=n(0),e=Object(s.a)({},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("为什么这么说？")]),t._v(" "),n("p",[t._v("因为这就是它的设计目的。")]),t._v(" "),n("p",[t._v("实现"),n("strong",[t._v("宏命令的宏命令")]),t._v("组合，可以看"),n("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Books/blob/master/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F(Desgin-Patterns)/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS设计模式-命令模式-MacroCommand"),n("OutboundLink")],1),t._v("实现过程。")]),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("首先我们先看看它的使用过程来理解其特点：")]),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),n("p",[t._v("首先我们了解实现删除从正面思路中难点，")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),n("p",[t._v("针对这一点我们可以换一个思路：")]),t._v(" "),t._m(12)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F","aria-hidden":"true"}},[this._v("#")]),this._v(" 组合模式")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("命令模式的升级版本")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F","aria-hidden":"true"}},[this._v("#")]),this._v(" 什么是组合模式？")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("是命令模式的升级版本，或者准确来说是命令模式中 "),a("strong",[this._v("宏命令")]),this._v(" 的升级版本。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E7%89%B9%E7%82%B9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E7%89%B9%E7%82%B9","aria-hidden":"true"}},[this._v("#")]),this._v(" 组合模式特点")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"language-JavaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新建一个组合命令")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" macroCommand1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MacroCommand")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" openTvCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" openSoundCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 再新建另外一个组合命令")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" macroCommand2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MacroCommand")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" closeDoorCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" openPcCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" openQQCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 两个组合命令添加到一个组合中")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" macroCommand "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MacroCommand")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" openAcCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" macroCommand1 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmacroCommand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" macroCommand2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("由于其中"),a("code",[this._v("execute")]),this._v("存在每个命令中；且"),a("code",[this._v("commandList")]),this._v("存在在"),a("code",[this._v("MacroCommand")]),this._v("中。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("execute")]),this._v("不是执行命令本身就是执行"),a("code",[this._v("commandList")]),this._v("。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%8B%93%E5%B1%95"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%8B%93%E5%B1%95","aria-hidden":"true"}},[this._v("#")]),this._v(" 组合模式进一步拓展")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ol",[n("li",[n("p",[t._v("每个命令基本都有相同属性和接口函数。")]),t._v(" "),n("p",[t._v("因此当使用"),n("code",[t._v("add")]),t._v("添加到"),n("code",[t._v("command")]),t._v("的时候就出现明显的树结构关系，也就是一个"),n("code",[t._v("command")]),t._v("嵌套其他命令，而其他命令中又有"),n("code",[t._v("commandList")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("删除命令")]),t._v(" - 如何实现将一条命令从"),n("code",[t._v("commandList")]),t._v("中删除")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("我们无法定位"),a("code",[this._v("commandA")]),this._v("在"),a("code",[this._v("commandList")]),this._v("的位置。也就没办法直接删除，也就是说此时的结构没办法反应位置关系")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("好消息是"),a("code",[this._v("commandList")]),this._v("是数组，删除起来比较容易("),a("code",[this._v("splice")]),this._v(")")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ul",[n("li",[t._v("我们从删除命令的本身执行"),n("code",[t._v("remove")]),t._v("，然后找到其"),n("code",[t._v("parent")]),t._v("，对"),n("code",[t._v("parent")]),t._v("下面的"),n("code",[t._v("commandList")]),t._v("进行操作。\n"),n("ol",[n("li",[t._v("因此我们对"),n("strong",[t._v("命令")]),t._v("(是"),n("code",[t._v("MacroCommand or openTvCommand")]),t._v(")添加"),n("code",[t._v("parent")]),t._v("。每次添加命令的时候("),n("strong",[t._v("是"),n("code",[t._v("MacroCommand")]),t._v("而不是"),n("code",[t._v("openTvCommand")])]),t._v(")，对子命令("),n("strong",[n("code",[t._v("MacroCommand or openTvCommand")])]),t._v(")指向"),n("code",[t._v("parent")]),t._v("属性赋值。")]),t._v(" "),n("li",[t._v("删除 - 从"),n("code",[t._v("parent.commadList")]),t._v("中找到该命令，然后"),n("code",[t._v("splice")])])])])])}],!1,null,null,null);a.default=e.exports}}]);