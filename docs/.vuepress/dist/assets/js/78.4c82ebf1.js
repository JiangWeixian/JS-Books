(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{214:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F","aria-hidden":"true"}},[t._v("#")]),t._v(" 命令模式")]),t._v(" "),s("blockquote",[s("p",[t._v("我们不道对象，但是命令知道")])]),t._v(" "),s("h2",{attrs:{id:"%E4%BB%80%E4%B9%88%E6%98%AF%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F","aria-hidden":"true"}},[t._v("#")]),t._v(" 什么是命令模式？")]),t._v(" "),s("p",[t._v("发生在我们需要发送请求，但是不知道对象是谁？")]),t._v(" "),s("p",[t._v("而命令模式的流程如下:")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("A")]),t._v("使用某命令"),s("code",[t._v("command")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("command")]),t._v("向接收方发送。")])]),t._v(" "),s("h3",{attrs:{id:"%E5%92%8C%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%8C%BA%E5%88%AB"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%92%8C%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%8C%BA%E5%88%AB","aria-hidden":"true"}},[t._v("#")]),t._v(" 和代理模式区别")]),t._v(" "),s("p",[t._v("以上流程说起来有点像代理模式，"),s("code",[t._v("command")]),t._v("有点像"),s("code",[t._v("proxy")]),t._v("。但是一定是有区别的。")]),t._v(" "),s("ol",[s("li",[t._v("首先命令模式并没有"),s("code",[t._v("proxy")]),t._v("那么复杂。过滤"),s("code",[t._v("A")]),t._v("的动作并不是它的主要设计目的。它的设计目的在"),s("strong",[t._v("命令模式特点")]),t._v("中体现。")]),t._v(" "),s("li",[s("code",[t._v("proxy")]),t._v("更像是封装了具体的逻辑功能，而"),s("code",[t._v("command")]),t._v("将接受对象在初始化的时候就封装了")])]),t._v(" "),s("p",[t._v("比较牵强的解释，其实并不需要特别在于两者区别。")]),t._v(" "),s("p",[t._v("其实用的好的话，两者可以融合。")]),t._v(" "),s("h2",{attrs:{id:"%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E7%89%B9%E7%82%B9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%E7%89%B9%E7%82%B9","aria-hidden":"true"}},[t._v("#")]),t._v(" 命令模式特点")]),t._v(" "),s("ol",[s("li",[t._v("开始与撤销 - "),s("code",[t._v("execute and undo")]),t._v("。")]),t._v(" "),s("li",[t._v("命令队列")]),t._v(" "),s("li",[t._v("宏命令 - 批量命令")])]),t._v(" "),s("h2",{attrs:{id:"%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B","aria-hidden":"true"}},[t._v("#")]),t._v(" 实现流程")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("实现命令 - 如果严格遵守命令模式特点，必须要有"),s("code",[t._v("execute")]),t._v("方法。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" openQQCommand "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'登录 QQ'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("strong",[t._v("如果不考虑第二点，单单是"),s("code",[t._v("openQQCommand")]),t._v("这个对象就已经是命令模式，可以在上面添加更多的接口函数。")])])]),t._v(" "),s("li",[s("p",[t._v("实现管理命令模块 - 类似"),s("strong",[t._v("自定义事件的实现方式")])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("MacroCommand")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        commandsList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        add"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" command "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commandsList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" command "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" command "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commandsList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("通过"),s("code",[t._v("add")]),t._v("添加命令")]),t._v(" "),s("li",[t._v("通过"),s("code",[t._v("excute")]),t._v("执行命令")])])])]),t._v(" "),s("p",[t._v("**注意：**不一定非要是"),s("code",[t._v("var = {}")]),t._v("这种模式，可以是"),s("code",[t._v("prototype")]),t._v("这种模式。")]),t._v(" "),s("h3",{attrs:{id:"%E5%BC%80%E5%A7%8B%E5%92%8C%E6%92%A4%E9%94%80"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%BC%80%E5%A7%8B%E5%92%8C%E6%92%A4%E9%94%80","aria-hidden":"true"}},[t._v("#")]),t._v(" 开始和撤销")]),t._v(" "),s("p",[s("code",[t._v("execute")]),t._v("是开始执行命令，可以撤销是命令模式的特点，"),s("strong",[t._v("撤销就是回到上一步。")]),t._v("。")]),t._v(" "),s("p",[t._v("实现撤销有两种方式")]),t._v(" "),s("ol",[s("li",[t._v("就像是执行动画一样，我可以向左移动一部分。那么撤销就是向右边移动。")]),t._v(" "),s("li",[t._v("而对于不太容易实现上述过程的代码(有些不可逆的代码)。方法就是将所有命令都保存一遍，然后重复执行"),s("strong",[t._v("直到撤销那一部之前")]),t._v("。")])]),t._v(" "),s("p",[s("strong",[t._v("第二点提到的所有命令都执行一遍就是要用到命令队列")])]),t._v(" "),s("h3",{attrs:{id:"%E5%91%BD%E4%BB%A4%E9%98%9F%E5%88%97"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%91%BD%E4%BB%A4%E9%98%9F%E5%88%97","aria-hidden":"true"}},[t._v("#")]),t._v(" 命令队列")]),t._v(" "),s("p",[t._v("存储所有执行过的有效命令")]),t._v(" "),s("h3",{attrs:{id:"%E5%AE%8F%E5%91%BD%E4%BB%A4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%AE%8F%E5%91%BD%E4%BB%A4","aria-hidden":"true"}},[t._v("#")]),t._v(" 宏命令")]),t._v(" "),s("p",[t._v("就是是"),s("code",[t._v("linux bash")]),t._v("中的"),s("code",[t._v("alias")]),t._v("。一个命令是其他部分命令的集合。")])])}],!1,null,null,null);a.default=e.exports}}]);