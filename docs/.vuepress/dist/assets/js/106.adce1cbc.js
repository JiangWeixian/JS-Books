(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{186:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p"),t._m(2),a("p"),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("知识点很多。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("什么时候受控模式？什么时候非受控模式？")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("具体见"),a("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/React/React-CSSModules.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS-modules"),a("OutboundLink")],1),t._v("这部分的总结")]),t._v(" "),t._m(13),t._v(" "),a("p",[t._v("父子通信是比较明白的。兄弟之间通信也能够实现。只要数据在父级处理然后分发就可以了。")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),a("p",[t._v("有几个比较明显的作用")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),a("p",[t._v("要记住一个原则就是：")]),t._v(" "),t._m(26),t._v(" "),a("p",[t._v("优化的方案有：")]),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"%E6%BC%AB%E8%B0%88react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E6%BC%AB%E8%B0%88react","aria-hidden":"true"}},[this._v("#")]),this._v(" 漫谈React")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("与CSS结合的最佳实践；性能优化")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#%E5%89%8D%E8%A8%80"}},[this._v("前言")])]),s("li",[s("a",{attrs:{href:"#event-system"}},[this._v("Event System")])]),s("li",[s("a",{attrs:{href:"#%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5"}},[this._v("几个概念")])]),s("li",[s("a",{attrs:{href:"#with-css-modules"}},[this._v("With CSS-Modules")])]),s("li",[s("a",{attrs:{href:"#commuication"}},[this._v("Commuication")])]),s("li",[s("a",{attrs:{href:"#hoc"}},[this._v("HOC")])]),s("li",[s("a",{attrs:{href:"#optimize-react"}},[this._v("Optimize React")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"%E5%89%8D%E8%A8%80"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%89%8D%E8%A8%80","aria-hidden":"true"}},[this._v("#")]),this._v(" 前言")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"event-system"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#event-system","aria-hidden":"true"}},[this._v("#")]),this._v(" Event System")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("React中事件不能等价与原生事件系统")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("只是重写了其中部分，缺失的那部分只能够通过原生的方法添加")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("而且只有冒泡模式，没有捕获方式")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("阻止事件冒泡")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("如果是原生和"),s("code",[this._v("React")]),this._v("混用的情况，如果"),s("strong",[this._v("阻止了React事件冒泡不能够阻止原生事件冒泡。但是如果阻止了原生的，就一定会阻止"),s("code",[this._v("React")]),this._v("的")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5","aria-hidden":"true"}},[this._v("#")]),this._v(" 几个概念")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("无论是原生组件还是还是非原生组件。组件的数据是通过"),s("code",[this._v("state or props")]),this._v("进行控制的。而非受控的模式是通过"),s("strong",[this._v("原生"),s("code",[this._v("DOM")]),this._v("的方式进行控制的")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"with-css-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#with-css-modules","aria-hidden":"true"}},[this._v("#")]),this._v(" With CSS-Modules")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"commuication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commuication","aria-hidden":"true"}},[this._v("#")]),this._v(" Commuication")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("但是如何实现层级比较深的组件通信：不是父子，也不是兄弟")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("文中推荐了"),a("code",[t._v("events")]),t._v("通过"),a("code",[t._v("pub/sub")]),t._v("的方式。需要"),a("code",[t._v("events")]),t._v("这个"),a("code",[t._v("npm")]),t._v("包。"),a("strong",[t._v("并不十分推荐"),a("code",[t._v("context")]),t._v("这个属性。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hoc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hoc","aria-hidden":"true"}},[this._v("#")]),this._v(" HOC")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("HOC的作用需要好好研究一下")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("作为数据源（或者是作为代理层：指的是不直接让外部访问被包裹的组件）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("如果只是这种目的，可以不需要HOC。有点大材小用了。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[s("p",[this._v("控制被包裹组件渲染，通过新的组件进行包裹，新的组件有新的"),s("code",[this._v("state")]),this._v("。因此被包裹组件的渲染是由父类进行控制的")])]),this._v(" "),s("li",[s("p",[this._v("反向继承 - "),s("strong",[this._v("个人认为HOC最为重要的特点了！")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("MyContainer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("WrappedComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("extends")]),t._v(" WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可以看到被返回的组件是继承的是"),s("code",[this._v("wrappedcomponent")]),this._v("。意味着再内部我们可以通过"),s("code",[this._v("wrappedComponent.state or .props")]),this._v("来访问到一些数据，从而对"),s("code",[this._v("wrappedcomponents")]),this._v("进行控制。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"optimize-react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#optimize-react","aria-hidden":"true"}},[this._v("#")]),this._v(" Optimize React")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("优化React。其中有些实现可能不需要通过插件的方式了，集成为了现有的API。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{attrs:{type:"checkbox",id:"cbx_0",disabled:"true"}}),s("label",{attrs:{for:"cbx_0"}},[this._v(" - 如何利用"),s("code",[this._v("immer")]),this._v("对"),s("code",[this._v("props")]),this._v("进行修改需要好好思考。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("JS中对象是引用类型的。对对象中数据的修改会反应到原始数据上。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("不要执行多次修改"),s("code",[this._v("state")]),this._v("，而是将其中的数据拿出来，然后修改完毕之后一次性的更新。"),s("strong",[this._v("这是由于每次修改"),s("code",[this._v("state")]),this._v("都会触发"),s("code",[this._v("render")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("为了避免修改对象数据而导致父类数据被修改。")]),this._v(" 那么自然也会想到将原始数据深度拷贝一份，这样修改之后再再一次更新回去便可以了。但是这回导致一个问题：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("深度拷贝或者浅度拷贝都是性能是有消耗的，而且比较大")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("即使我们不考虑拷贝的问题")]),t._v("，因为现在可以通过"),a("code",[t._v("...")]),t._v("进行操作。从某种意义上来说可以解决大部分的问题了。")]),t._v(" "),a("blockquote",[a("p",[t._v("但是可能会导致的问题是，会复制全部的内容。"),a("strong",[t._v("可能我们期望的场景是：")]),t._v(" 只修改被修改的内容，不被修改的内容则保留。同时如果被修改的内容和之前的内容是一致的，则不需要进行复制。直接返回原先的对象就可以了。")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这可能就需要引入第三方库进行操作了，调研下来"),s("strong",[this._v("immer.js")]),this._v("这个库是比较好的。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("一个建议，最好再项目一开始就定下来进行使用！")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",{attrs:{start:"2"}},[a("li",[t._v("使用对象变量，如果我们给对象设置"),a("code",[t._v("props")]),t._v("为"),a("code",[t._v("<div style={ { width: 'xpx' } }></div>")]),t._v("，那么每次"),a("code",[t._v("render")]),t._v("之后"),a("code",[t._v("style")]),t._v("得到对象都应该是新创建的。性能消耗是比较大的。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("我们能进行的优化是，将{ width: 'xpx' }这部分数据保存为到一个变量里面。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",{attrs:{start:"3"}},[a("li",[a("p",[a("code",[t._v("shouldcomponentupdate")]),t._v(" - 要学会使用这个钩子还是。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("is"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immutable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shouldComponentUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" thisProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" thisState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    nextState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    nextProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n      Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" BaseComponent\n")])])]),a("p",[t._v("一个小技巧是，如果你是用了"),a("code",[t._v("immer")]),t._v("，你可以再新建组件的时候通过"),a("code",[t._v("class newcomponent extends BaseComponent")]),t._v("直接继承一个优化之后的组建。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("immer")]),t._v("如何使用还是要进一步研究的。只是留坑简单说明。")])])]),t._v(" "),a("li",[a("p",[t._v("设置组件"),a("code",[t._v("key")])])]),t._v(" "),a("li",[a("p",[t._v("不要移动跨层级移动节点，如果需要这么做，宁愿创建两个阶段，设置隐藏和删除。因为对于"),a("code",[t._v("react")]),t._v("来说跨层级的移动是比较消耗性能的。")])])])}],!1,null,null,null);s.default=e.exports}}]);